{% extends "layout.html" %} {% block css %}
<link rel="stylesheet" href="style/index.css"> {% endblock %} {% block sidebar %}
<div id="sidebar-content">
    <div id="sidebar-subtitle">Item Type:</div>
    <div id="item-categories">
        <a href="?filter=none">&#9675; All</a>
        <a href="?filter=armors">&#9675; Armors</a>
        <a href="?filter=consumables">&#9675; Consumables</a>
        <a href="?filter=cosmetics">&#9675; Cosmetics</a>
        <a href="?filter=weapons">&#9675; Weapons</a>
    </div>
    <hr>
    <a href="?filter=onlineOnly">&#9633; Online Sellers Only</a>
    <hr>
</div>
{% endblock %} {% block content %}
<script type = "text/javascript">
    function buyItem(id) {
        const amount = document.getElementById(id).value;
        fetch("/buy", {
            method: "POST", 
            body: JSON.stringify({
                sellOfferId: id,
                amount: amount
            })}).then(res => {
            console.log("Request complete! response:", res);
        });
    }
</script>
<div id="item-browser">
    <div id="menu-container">
        <div id="menu-search-bar">
            <input type="search" name="search" id="search-input" placeholder="Search..." autocomplete="off">
            <div id="search-button-container"><button id="submit-search-button"><img src="assets/searchButton.png" alt=""></button></div>
        </div>
        <select id="order-selector">
            <optgroup label="Price">
                <option>Low to High</option>
                <option>High to Low</option>
            </optgroup>
            <optgroup label="Date">
                <option>Newest First</option>
                <option>Oldest First</option>
            </optgroup>
        </select>
    </div>
    <div id="items-list">
        {% for item in items %}
        <div id="item-card">
            <div id="item-preview">
                <img src="{{item.image}}" alt="">
                <span id="item-name">{{item.name}}</span>
                <span id="category-name">{{item.category}}</span>
            </div>
            <div id="seller-details">
                <span id="seller-name">{{item.seller}}</span>
                <span id="seller-status">&#9679;</span>
            </div>
            <div id="item-details">
                <div id="item-count-selector">
                    <div>Item count:</div>
                    <input type="number" value="1" id="{{item.sellOrderId}}" min="1" max="{{item.count}}">
                </div>
                <div id="price-number">{{item.price}}</div>
            </div>
            <div id="buy-button-container">
                <button id="buy-button" value="{{item.sellOrderId}}" onclick="buyItem(this.value)">BUY NOW</button>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}